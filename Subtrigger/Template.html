<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Subtrigger::Template</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo; 
    <span class='title'><a href="../Subtrigger.html" title="Subtrigger (module)">Subtrigger</a></span>
     &raquo; 
    <span class="title">Template</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Subtrigger::Template
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Subtrigger::Template</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/subtrigger/template.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Reads, parses and manages inline templates.
</p>
<p>
When you define string templates at the end of your rules file, this class
can parse and keep track of them. You can then easily retrieve them again
and optionally format it like with <tt>String#%</tt>.
</p>
<p>
You simply define a new template using <tt>@@</tt>, followed by a name and
then the textual contents (see the example below).
</p>
<p>
You can read the templates and use them, for example, in e-mails.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
Defining templates
</p>
</div></h4>
      <pre class="example code"><span class='comment val'># at the end of your Ruby file:</span>
 <span class='__END__ identifier id'>__END__</span>
<span class='@@ ivar id'>@@</span> <span class='Template constant id'>Template</span> <span class='integer val'>1</span>
<span class='Foo constant id'>Foo</span>
<span class='@@ ivar id'>@@</span> <span class='Template constant id'>Template</span> <span class='integer val'>2</span>
<span class='Hello constant id'>Hello</span><span class='comma token'>,</span> <span class='s! fid id'>s!</span>
</pre>
    
      <h4><div class='inline'><p>
Parsing templates
</p>
</div></h4>
      <pre class="example code"><span class='Template constant id'>Template</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='__DATA__ identifier id'>__DATA__</span><span class='dot token'>.</span><span class='read identifier id'>read</span><span class='rparen token'>)</span>
</pre>
    
      <h4><div class='inline'><p>
Using templates
</p>
</div></h4>
      <pre class="example code"><span class='Template constant id'>Template</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>'Template 1'</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; 'Foo'</span>
</pre>
    
      <h4><div class='inline'><p>
Formatting templates
</p>
</div></h4>
      <pre class="example code"><span class='Template constant id'>Template</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>'Template 2'</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; 'Hello, %s!'</span>
<span class='Template constant id'>Template</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='string val'>'Template 2'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='format identifier id'>format</span><span class='lparen token'>(</span><span class='string val'>'world'</span><span class='rparen token'>)</span> <span class='comment val'># =&gt; 'Hello, world!'</span>
</pre>
    
  </div>
<h3>Author:</h3>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
Arjan van der Gaag
</p>
</div>
      
    </li>
  
</ul>
<h3>Since:</h3>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>
0.3.0
</p>
</div>
      
    </li>
  
</ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="TEMPLATE_DELIMITER-constant" class="">TEMPLATE_DELIMITER =
          <div class="docstring">
  <div class="discussion">
    <p>
The pattern that separates one template from another
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='regexp val'>/^@@ (.*)\n/</span>
</pre></dd>
      
        <dt id="Unparseable-constant" class="">Unparseable =
          <div class="docstring">
  <div class="discussion">
    <p>
Exception raised when a string cannot be parsed into templates, because the
delimiter cannot be found
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='Class constant id'>Class</span><span class='dot token'>.</span><span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='Exception constant id'>Exception</span><span class='rparen token'>)</span>
</pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The unique identifier for this template.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#string-instance_method" title="#string (instance method)">- (Object) <strong>string</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The actual contents of the template.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find-class_method" title="find (class method)">+ (String) <strong>find</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Finds and returns the content of the template by the given name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-class_method" title="parse (class method)">+ (nil) <strong>parse</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Parse the contents of a string and extract templates from it.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format-instance_method" title="#format (instance method)">- (String) <strong>format</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Get the contents of the template and interpolate any given arguments into
it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Template) <strong>initialize</strong>(name, string) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Template.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (String) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Convert to string using the textual contents of the template.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><a href="" title="Subtrigger::Template (class)">Template</a></tt>) <strong>initialize</strong>(name, string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Template
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
is the unique identifier of a template
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>string</span>
      
      
      
        &mdash;
        <div class='inline'><p>
is the contents of the template.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 92</span>

<span class='def def kw'>def</span> <span class='initialize identifier id'>initialize</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='@name ivar id'>@name</span><span class='comma token'>,</span> <span class='@string ivar id'>@string</span> <span class='assign token'>=</span> <span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='string identifier id'>string</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="name-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The unique identifier for this template
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 35</span>

<span class='def def kw'>def</span> <span class='name identifier id'>name</span>
  <span class='@name ivar id'>@name</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="string-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="string-instance_method">
  
    - (<tt>Object</tt>) <strong>string</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The actual contents of the template
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 38</span>

<span class='def def kw'>def</span> <span class='string identifier id'>string</span>
  <span class='@string ivar id'>@string</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="find-class_method">
  
    + (<tt>String</tt>) <strong>find</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Finds and returns the content of the template by the given name.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
is the name of the template
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
is Template#content
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 67</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='find identifier id'>find</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='rparen token'>)</span>
  <span class='@children ivar id'>@children</span><span class='dot token'>.</span><span class='find identifier id'>find</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='child identifier id'>child</span><span class='bitor op'>|</span>
    <span class='child identifier id'>child</span><span class='dot token'>.</span><span class='name identifier id'>name</span> <span class='eq op'>==</span> <span class='name identifier id'>name</span>
  <span class='rbrace token'>}</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parse-class_method">
  
    + (<tt>nil</tt>) <strong>parse</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Parse the contents of a string and extract templates from it. These are
tracked so you can use <tt>Template#find</tt> to retrieve them by name.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>the</span>
      
      
      
        &mdash;
        <div class='inline'><p>
contents of your rules file&#8217;s <tt><em>DATA</em>.read</tt>
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt><a href="#Unparseable-constant" title="Subtrigger::Template::Unparseable (constant)">Unparseable</a></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 55</span>

<span class='def def kw'>def</span> <span class='self self kw'>self</span><span class='dot token'>.</span><span class='parse identifier id'>parse</span><span class='lparen token'>(</span><span class='string identifier id'>string</span><span class='rparen token'>)</span>
  <span class='raise identifier id'>raise</span> <span class='Unparseable constant id'>Unparseable</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Could not split into templates: #{string.inspect}&quot;</span> <span class='unless unless_mod kw'>unless</span> <span class='string identifier id'>string</span> <span class='match op'>=~</span> <span class='TEMPLATE_DELIMITER constant id'>TEMPLATE_DELIMITER</span>
  <span class='string identifier id'>string</span><span class='dot token'>.</span><span class='split identifier id'>split</span><span class='lparen token'>(</span><span class='TEMPLATE_DELIMITER constant id'>TEMPLATE_DELIMITER</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='map identifier id'>map</span><span class='lparen token'>(</span><span class='bitand op'>&amp;</span><span class='symbol val'>:chomp</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='slice identifier id'>slice</span><span class='lparen token'>(</span><span class='float val'>1</span><span class='dot2 op'>..</span><span class='integer val'>-1</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='each_slice identifier id'>each_slice</span><span class='lparen token'>(</span><span class='integer val'>2</span><span class='rparen token'>)</span> <span class='do do kw'>do</span> <span class='bitor op'>|</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='content identifier id'>content</span><span class='bitor op'>|</span>
    <span class='@children ivar id'>@children</span> <span class='lshft op'>&lt;&lt;</span> <span class='new identifier id'>new</span><span class='lparen token'>(</span><span class='name identifier id'>name</span><span class='comma token'>,</span> <span class='content identifier id'>content</span><span class='rparen token'>)</span>
  <span class='end end kw'>end</span>
  <span class='nil nil kw'>nil</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="format-instance_method">
  
    - (<tt>String</tt>) <strong>format</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Get the contents of the template and interpolate any given arguments into
it.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
Getting a template and using interpolation
</p>
</div></h4>
      <pre class="example code"><span class='template identifier id'>template</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>           <span class='comment val'># =&gt; 'Dear %s...'</span>
<span class='template identifier id'>template</span><span class='dot token'>.</span><span class='format identifier id'>format</span> <span class='string val'>'John'</span>  <span class='comment val'># =&gt; 'Dear John...'</span>
</pre>
    
  </div>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
the formatted template contents
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 86</span>

<span class='def def kw'>def</span> <span class='format identifier id'>format</span><span class='lparen token'>(</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rparen token'>)</span>
  <span class='to_s identifier id'>to_s</span> <span class='mod op'>%</span> <span class='lbrack token'>[</span><span class='mult op'>*</span><span class='args identifier id'>args</span><span class='rbrack token'>]</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt>String</tt>) <strong>to_s</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Convert to string using the textual contents of the template
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/subtrigger/template.rb', line 75</span>

<span class='def def kw'>def</span> <span class='to_s identifier id'>to_s</span>
  <span class='string identifier id'>string</span>
<span class='end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Fri Jul 16 10:55:17 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.8 (ruby-1.8.7).
</div>

  </body>
</html>